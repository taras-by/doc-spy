{% extends 'base.html.twig' %}

{% block title %}Feed{% endblock %}

{% block body %}

    <div class="container">
        {% for item in items %}
                <div class="row item">
                    <div class="col-md-2">
                        {% if (date is not defined) or (date is defined and item.publishedAt|date("d.m.Y") != date|date("d.m.Y")) %}
                            <div class="item-date">
                                {{ item.publishedAt|date("d.m.Y") }}
                            </div>
                        {% endif %}
                    </div>
                    <div class="col-md-10 item-title">
                        {% if item.source.icon %}
                            <a href="{{ path('source_show', {'id' : item.source.id} ) }}">
                                <img src="{{ item.source.icon }}" width="16" height="16" />
                            </a>
                        {% endif %}
                        <a  class="item-link" href="{{ item.link }}" target="_blank">{{ item.title }}</a>
                    </div>
                </div>
            {% set date = item.publishedAt %}
        {% endfor %}
    </div>

    {% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">

    <style>

        .item-date {
            font-style: italic;
        }

        @media (max-width: 767px) {
            .item-date {
                margin-left: 30px;
            }
            .item-date:after {
                display: block;
                content: "";
                border-bottom: 1px solid #DDDDDD;
                margin: 1em 0;
            }
        }

        @media (min-width: 768px) {
            .item-date {
                text-align: right;
                position: relative;
                left: 14px;
            }
        }

        .item-title {
            position: relative;
        }

        .item-title:after {
            display: block;
            content: "";
            border-bottom: 1px solid #DDDDDD;
            margin: 1em 0 1em 30px;
        }

        .item-title img {
            position: absolute;
            top: 4px;
            opacity: .7;
        }

        .item:hover .item-title img {
            opacity: 1;
        }

        .item-link {
            display: block;
            margin-left: 30px;
        }

    </style>

    {% endblock %}

{% block javascripts %}
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
    {% endblock %}
